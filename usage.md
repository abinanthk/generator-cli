# Generator CLI - Usage Examples

This document provides practical examples of using the Generator CLI tool for different scenarios.

## ğŸ¯ Complete Workflow Example

### Step 1: Generate Documentation from Swagger

```bash
# Start with a real API - let's use the Petstore example
generator-cli generate:documents \
  --swagger-url https://petstore.swagger.io/v2/swagger.json \
  --output ./documents

# Output:
# âœ“ Documents generated successfully!
# Files created in: ./documents
#   - apis.xlsx - API endpoints documentation  
#   - models.xlsx - Schema and type definitions
```

### Step 2: Analyze the Generated Documentation

```bash
generator-cli analyze:docs \
  --apis ./documents/apis.xlsx \
  --models ./documents/models.xlsx

# Output:
# ğŸ“Š Documentation Analysis:
# APIs: 20 endpoints across 3 tags
# Models: 12 schema definitions
# Coverage: 85.0% of operations have complete documentation
# 
# âš ï¸  Issues found:
#   - API #3 (findPetsByStatus): Missing business purpose - AI context will be limited
#   - Model #8 (Pet): Missing description - AI context will be limited
```

### Step 3: Configure the CLI for Your Project

```bash
# Interactive configuration setup
generator-cli config:init --interactive

# Follow the prompts:
# ? Output directory for generated code: ./src
# ? Custom templates directory: ./templates  
# ? Documents directory: ./documents
# ? Naming convention: kebab-case
# ? Generate TypeScript model interfaces? Yes
# ? Generate API service classes? Yes
# ? Generate React Query hooks? Yes
# ? Generate API endpoint constants? Yes
```

### Step 4: Generate All Code Components

```bash
generator-cli generate:all \
  --apis ./documents/apis.xlsx \
  --models ./documents/models.xlsx \
  --output ./src

# Output:
# âœ“ Generated constants for tag: pet
# âœ“ Generated constants for tag: store  
# âœ“ Generated constants for tag: user
# âœ“ Generated 8 models for tag: pet
# âœ“ Generated 3 models for tag: store
# âœ“ Generated 4 models for tag: user
# âœ“ Generated service for tag: pet (8 operations)
# âœ“ Generated service for tag: store (4 operations)
# âœ“ Generated service for tag: user (8 operations)
# âœ“ Generated queries for tag: pet (8 operations)
# âœ“ Generated queries for tag: store (4 operations)
# âœ“ Generated queries for tag: user (8 operations)
# âœ“ All code components generated successfully!
```

## ğŸ—ï¸ Incremental Development Example

### Working with Specific Tags Only

```bash
# Generate code for just the 'users' functionality
generator-cli generate:constants --apis ./documents/apis.xlsx --tag user
generator-cli generate:models --models ./documents/models.xlsx --tag user  
generator-cli generate:services --apis ./documents/apis.xlsx --tag user
generator-cli generate:queries --apis ./documents/apis.xlsx --tag user
```

### Adding New APIs to Existing Project

```bash
# Step 1: Update your Swagger file with new endpoints
# Step 2: Regenerate documentation
generator-cli generate:documents \
  --swagger-file ./updated-swagger.yaml \
  --output ./documents

# Step 3: Generate only the new components (e.g., new 'admin' tag)
generator-cli generate:all \
  --apis ./documents/apis.xlsx \
  --models ./documents/models.xlsx \
  --tag admin
```

## ğŸ¨ Custom Template Example

### Creating Custom Templates

```bash
# Initialize custom templates
generator-cli template:init --type models
generator-cli template:init --type services

# List available templates
generator-cli template:list
# Output:
# ğŸ“‹ Available Templates:
#   âœ“ constants - API endpoint constants template
#   âœ“ models - TypeScript model interfaces template  
#   âœ“ services - Axios API service template
#   âœ“ queries - React Query hooks template
```

### Example Custom Model Template

Create `./templates/models.hbs`:

```handlebars
// ğŸ¯ Custom Model Template
// Generated on: {{timestamp}}
// Business Context: {{#if description}}{{description}}{{else}}Auto-generated model{{/if}}

{{#each models}}
/**
 * {{#if description}}{{description}}{{else}}{{modelName}} interface{{/if}}
 {{#if usedInOperations}}
 * Used in operations: {{usedInOperations}}
 {{/if}}
 * @generated Generated by generator-cli
 */
export interface {{modelName}} {
{{#each (parseJSON properties)}}
  {{#if this.description}}
  /** {{this.description}} */
  {{/if}}
  {{#if this.example}}
  /** @example {{this.example}} */
  {{/if}}
  {{@key}}{{#unless (includes ../required @key)}}?{{/unless}}: {{this.type}}{{#if this.enum}} | {{join this.enum " | "}}{{/if}};
{{/each}}
}

{{#if (parseJSON required)}}
/**
 * Required fields for {{modelName}}
 */
export type {{modelName}}Required = Pick<{{modelName}}, {{#each (parseJSON required)}}'{{this}}'{{#unless @last}} | {{/unless}}{{/each}}>;

{{/if}}
/**
 * Partial {{modelName}} for updates
 */
export type {{modelName}}Update = Partial<{{modelName}}>;

{{/each}}

// Export all types
export type {
{{#each models}}
  {{modelName}},
  {{#if (parseJSON required)}}{{modelName}}Required,{{/if}}
  {{modelName}}Update,
{{/each}}
};
```

## ğŸ” Validation and Quality Assurance

### Comprehensive Validation Workflow

```bash
# Step 1: Validate original Swagger file
generator-cli validate:swagger --swagger-file ./swagger.yaml

# Step 2: Generate documentation
generator-cli generate:documents --swagger-file ./swagger.yaml --output ./documents

# Step 3: Analyze documentation quality
generator-cli analyze:docs --apis ./documents/apis.xlsx --models ./documents/models.xlsx

# Step 4: Fix issues and regenerate if needed
# Edit the Swagger file based on analysis feedback
generator-cli generate:documents --swagger-file ./swagger.yaml --output ./documents

# Step 5: Final validation before code generation
generator-cli analyze:docs --apis ./documents/apis.xlsx --models ./documents/models.xlsx
```

### Handling Validation Issues

```bash
# Common issue: Missing business context
# Edit your Swagger file to add descriptions and examples

# Before (in swagger.yaml):
paths:
  /users:
    get:
      summary: Get users
      operationId: getUsers

# After (in swagger.yaml):  
paths:
  /users:
    get:
      summary: Get users
      description: Retrieve paginated list of users for admin dashboard management. Supports filtering by role and status.
      operationId: getUsers
      parameters:
        - name: page
          in: query
          description: Page number for pagination
          schema:
            type: integer
            example: 1
```

## ğŸš€ Real-World Integration Examples

### Next.js App Integration

```bash
# Project structure
my-nextjs-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ pages/
â”‚   â””â”€â”€ generated/          # Generated code goes here
â”‚       â”œâ”€â”€ constants/
â”‚       â”œâ”€â”€ models/
â”‚       â”œâ”€â”€ services/
â”‚       â””â”€â”€ queries/
â”œâ”€â”€ swagger.yaml
â””â”€â”€ .generator-cli.json

# Configuration for Next.js project
cat > .generator-cli.json << EOF
{
  "outputDir": "./src/generated",
  "templateDir": "./templates",
  "documentsDir": "./docs/api",
  "namingConvention": "kebab-case",
  "generateTypes": true,
  "generateServices": true,
  "generateQueries": true,
  "generateConstants": true
}
EOF

# Generate everything
generator-cli generate:documents --swagger-file ./swagger.yaml --output ./docs/api
generator-cli generate:all --apis ./docs/api/apis.xlsx --models ./docs/api/models.xlsx
```

### Using Generated Code in Components

```typescript
// Example React component using generated code
import React from 'react';
import { useGetUsersQuery } from '@/generated/queries/user';
import { GetUsersQueryParams } from '@/generated/models/user';

export const UsersList: React.FC = () => {
  const [filters, setFilters] = React.useState<GetUsersQueryParams>({
    page: 1,
    limit: 10,
    role: 'user'
  });

  const { 
    data, 
    isLoading, 
    error 
  } = useGetUsersQuery(filters, {
    staleTime: 5 * 60 * 1000, // 5 minutes
    retry: 3
  });

  if (isLoading) return <div>Loading users...</div>;
  if (error) return <div>Error loading users: {error.message}</div>;

  return (
    <div>
      <h2>Users ({data?.totalCount})</h2>
      {data?.data?.map(user => (
        <div key={user.id}>
          {user.name} - {user.email}
        </div>
      ))}
    </div>
  );
};
```

## ğŸ”„ CI/CD Integration Example

### GitHub Actions Workflow

```yaml
# .github/workflows/api-codegen.yml
name: API Code Generation

on:
  push:
    paths:
      - 'swagger.yaml'
      - 'api/**'
  pull_request:
    paths:
      - 'swagger.yaml'
      - 'api/**'

jobs:
  generate-api-code:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          
      - name: Install Generator CLI
        run: npm install -g generator-cli
        
      - name: Validate Swagger
        run: generator-cli validate:swagger --swagger-file ./swagger.yaml
        
      - name: Generate Documentation
        run: generator-cli generate:documents --swagger-file ./swagger.yaml --output ./docs/api
        
      - name: Analyze Documentation
        run: generator-cli analyze:docs --apis ./docs/api/apis.xlsx --models ./docs/api/models.xlsx
        
      - name: Generate Code
        run: generator-cli generate:all --apis ./docs/api/apis.xlsx --models ./docs/api/models.xlsx
        
      - name: Commit Generated Code
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add src/generated/ docs/api/
          git diff --staged --quiet || git commit -m "ğŸ¤– Update generated API code"
          git push
```

### Package.json Scripts

```json
{
  "scripts": {
    "api:validate": "generator-cli validate:swagger --swagger-file ./swagger.yaml",
    "api:docs": "generator-cli generate:documents --swagger-file ./swagger.yaml --output ./docs/api",
    "api:analyze": "generator-cli analyze:docs --apis ./docs/api/apis.xlsx --models ./docs/api/models.xlsx", 
    "api:generate": "generator-cli generate:all --apis ./docs/api/apis.xlsx --models ./docs/api/models.xlsx",
    "api:full": "npm run api:validate && npm run api:docs && npm run api:analyze && npm run api:generate",
    "api:users": "generator-cli generate:all --apis ./docs/api/apis.xlsx --models ./docs/api/models.xlsx --tag users",
    "dev": "npm run api:full && next dev"
  }
}
```

## ğŸ¤– AI Assistant Integration Example

### ChatGPT/Claude Prompts with Generated Documentation

```markdown
## Prompt for AI Assistant

I have API documentation generated by generator-cli. Here's the context:

**Business Purpose**: User management system for e-commerce platform
**API Endpoint**: GET /users/{id}
**Response Model**: GetUserByIdOutData with properties: id(string), name(string), email(string), role(enum: admin|user), createdAt(Date), profile(UserProfileData)

Please generate a React component that:
1. Uses the generated useGetUserByIdQuery hook
2. Displays user information in a card layout
3. Handles loading and error states
4. Shows different UI based on user role
5. Uses proper TypeScript types from generated models

Additional context from spreadsheet:
- requiresAuth: true
- isPaginated: false
- businessPurpose: "Retrieve individual user details for profile management and admin operations"
```

### AI Code Review with Context

```markdown
## AI Code Review Request

Using generator-cli generated types and services, please review this API integration:

```typescript
// Generated types available:
// - CreateUserInData: { name: string; email: string; role: 'admin' | 'user' }  
// - CreateUserOutData: { id: string; name: string; email: string; message: string }
// - useCreateUserMutation hook available

const handleCreateUser = async (userData: any) => {
  const response = await fetch('/api/users', {
    method: 'POST',
    body: JSON.stringify(userData)
  });
  return response.json();
};
```

Issues to check:
1. Type safety - should use generated types
2. Error handling - should use generated mutation hook
3. Consistency - should use generated service methods
4. Best practices - React Query integration
```

## ğŸ¯ Advanced Customization Examples

### Custom Business Logic Integration

```typescript
// templates/services-with-auth.hbs
import axios, { AxiosResponse } from 'axios';
import { getAuthToken, refreshToken } from '@/lib/auth';

// Add custom axios interceptor
const apiClient = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_BASE_URL
});

apiClient.interceptors.request.use((config) => {
  const token = getAuthToken();
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

apiClient.interceptors.response.use(
  (response) => response,
  async (error) => {
    if (error.response?.status === 401) {
      await refreshToken();
      return apiClient.request(error.config);
    }
    return Promise.reject(error);
  }
);

export class {{pascalCase tag}}Service {
{{#each operations}}
  static async {{camelCaseName}}(/* ... parameters ... */): Promise<AxiosResponse<{{responseBodyRef}}>> {
    // Custom service implementation with auth handling
    return apiClient.{{lowercase method}}(/* ... */);
  }
{{/each}}
}
```

### Environment-Specific Configuration

```bash
# Development environment
generator-cli config:set outputDir ./src/generated/dev
generator-cli config:set apiBaseUrl http://localhost:3000/api

# Production environment  
generator-cli config:set outputDir ./src/generated/prod
generator-cli config:set apiBaseUrl https://api.example.com
```

### Multi-API Project Example

```bash
# Generate code for multiple APIs
generator-cli generate:documents --swagger-url https://api.users.com/swagger.json --output ./docs/users-api
generator-cli generate:documents --swagger-url https://api.orders.com/swagger.json --output ./docs/orders-api

generator-cli generate:all --apis ./docs/users-api/apis.xlsx --models ./docs/users-api/models.xlsx --output ./src/generated/users
generator-cli generate:all --apis ./docs/orders-api/apis.xlsx --models ./docs/orders-api/models.xlsx --output ./src/generated/orders
```

## ğŸš€ Performance Tips

### Optimizing Generated Code

```bash
# Generate only what you need
generator-cli generate:constants --apis ./documents/apis.xlsx --tag users
generator-cli generate:models --models ./documents/models.xlsx --tag users

# Use tree-shaking friendly exports
generator-cli config:set generateTypes true
generator-cli config:set generateServices false  # Use custom service implementation
```

### Caching Strategy

```typescript
// Example: Using generated types with optimized caching
export const useOptimizedUsersQuery = (params: GetUsersQueryParams) => {
  return useGetUsersQuery(params, {
    staleTime: 5 * 60 * 1000,     // 5 minutes
    cacheTime: 10 * 60 * 1000,    // 10 minutes  
    refetchOnWindowFocus: false,
    retry: (failureCount, error: any) => {
      if (error?.response?.status === 404) return false;
      return failureCount < 3;
    }
  });
};
```

This comprehensive example guide shows how to use Generator CLI in real-world scenarios, from basic usage to advanced customization and CI/CD integration. The tool bridges the gap between API specifications and production-ready frontend code while providing rich context for AI-assisted development.